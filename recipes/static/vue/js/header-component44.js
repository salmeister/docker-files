"use strict";(self["webpackChunkvue"]=self["webpackChunkvue"]||[]).push([[240],{52544:function(e,i,t){t.r(i),t.d(i,{default:function(){return u}});var s=function(){var e=this,i=e.$createElement,t=e._self._c||i;return t("div",[t("b-button",{directives:[{name:"b-modal",rawName:"v-b-modal",value:"modal-file-editor"+e.file_id,expression:"'modal-file-editor'+file_id"}],class:{"btn-success":void 0===e.file_id}},[this.file_id?[e._v(e._s(e.$t("Edit")))]:[e._v(e._s(e.$t("New")))]],2),t("b-modal",{attrs:{id:"modal-file-editor"+e.file_id,title:e.$t("File")},on:{ok:function(i){return e.modalOk()}},scopedSlots:e._u([{key:"modal-footer",fn:function(){return[t("b-button",{attrs:{size:"sm",variant:"success"},on:{click:function(i){return e.modalOk()}}},[e._v(" "+e._s(e.$t("Ok"))+" ")]),t("b-button",{attrs:{size:"sm",variant:"secondary"},on:{click:function(i){return e.$bvModal.hide("modal-file-editor"+e.file_id)}}},[e._v(" "+e._s(e.$t("Cancel"))+" ")]),t("b-button",{attrs:{size:"sm",variant:"danger"},on:{click:function(i){return e.deleteFile()}}},[e._v(" "+e._s(e.$t("Delete"))+" ")])]},proxy:!0}])},[void 0!==e.file?[e._v(" "+e._s(e.$t("Name"))+" "),t("b-input",{model:{value:e.file.name,callback:function(i){e.$set(e.file,"name",i)},expression:"file.name"}}),t("br"),e._v(" "+e._s(e.$t("File"))+" "),t("b-form-file",{model:{value:e.file.file,callback:function(i){e.$set(e.file,"file",i)},expression:"file.file"}})]:e._e(),t("br"),t("br")],2)],1)},l=[],n=t(70846),o=t(4222),r={name:"FileEditor",data(){return{file:void 0}},props:{file_id:Number},mounted(){void 0!==this.file_id?this.loadFile(this.file_id.toString()):this.file={name:"",file:void 0}},methods:{loadFile:function(e){let i=new n.ApiApiFactory;i.retrieveUserFile(e).then((e=>{this.file=e.data}))},modalOk:function(){void 0===this.file_id?(console.log("CREATING"),this.createFile()):(console.log("UPDATING"),this.updateFile())},updateFile:function(){let e,i=new n.ApiApiFactory;"string"===typeof this.file.file||this.file.file instanceof String||(e=this.file.file),i.updateUserFile(this.file.id,this.file.name,e).then((e=>{(0,o.makeToast)(this.$t("Success"),this.$t("success_updating_resource"),"success"),this.$emit("change")})).catch((e=>{(0,o.makeToast)(this.$t("Error"),this.$t("err_updating_resource")+"\n"+e.response.data,"danger"),console.log(e.request,e.response)}))},createFile:function(){let e=new n.ApiApiFactory;e.createUserFile(this.file.name,this.file.file).then((e=>{(0,o.makeToast)(this.$t("Success"),this.$t("success_creating_resource"),"success"),this.$emit("change"),this.file={name:"",file:void 0}})).catch((e=>{(0,o.makeToast)(this.$t("Error"),this.$t("err_creating_resource")+"\n"+e.response.data,"danger"),console.log(e.request,e.response)}))},deleteFile:function(){let e=new n.ApiApiFactory;e.destroyUserFile(this.file.id).then((e=>{(0,o.makeToast)(this.$t("Success"),this.$t("success_deleting_resource"),"success"),this.$emit("change")})).catch((e=>{(0,o.makeToast)(this.$t("Error"),this.$t("err_deleting_resource")+"\n"+e.response.data,"danger"),console.log(e.request,e.response)}))}}},a=r,c=t(1001),d=(0,c.Z)(a,s,l,!1,null,null,null),u=d.exports}}]);