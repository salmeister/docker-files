"use strict";(self["webpackChunkvue"]=self["webpackChunkvue"]||[]).push([[240],{52544:function(e,i,t){t.r(i),t.d(i,{default:function(){return f}});var n=function(){var e=this,i=e.$createElement,t=e._self._c||i;return t("div",[t("b-button",{directives:[{name:"b-modal",rawName:"v-b-modal",value:"modal-file-editor"+e.file_id,expression:"'modal-file-editor'+file_id"}],class:{"btn-success":void 0===e.file_id}},[this.file_id?[e._v(e._s(e.$t("Edit")))]:[e._v(e._s(e.$t("New")))]],2),t("b-modal",{attrs:{id:"modal-file-editor"+e.file_id,title:e.$t("File")},on:{ok:function(i){return e.modalOk()}},scopedSlots:e._u([{key:"modal-footer",fn:function(){return[t("b-button",{attrs:{size:"sm",variant:"success"},on:{click:function(i){return e.modalOk()}}},[e._v(" "+e._s(e.$t("Ok"))+" ")]),t("b-button",{attrs:{size:"sm",variant:"secondary"},on:{click:function(i){return e.$bvModal.hide("modal-file-editor"+e.file_id)}}},[e._v(" "+e._s(e.$t("Cancel"))+" ")]),t("b-button",{attrs:{size:"sm",variant:"danger"},on:{click:function(i){return e.deleteFile()}}},[e._v(" "+e._s(e.$t("Delete"))+" ")])]},proxy:!0}])},[void 0!==e.file?[e._v(" "+e._s(e.$t("Name"))+" "),t("b-input",{model:{value:e.file.name,callback:function(i){e.$set(e.file,"name",i)},expression:"file.name"}}),t("br"),e._v(" "+e._s(e.$t("File"))+" "),t("b-form-file",{model:{value:e.file.file,callback:function(i){e.$set(e.file,"file",i)},expression:"file.file"}})]:e._e(),t("br"),t("br")],2)],1)},s=[],o=(t(9653),t(41539),t(39714),t(68309),t(70846)),l=t(4222),r={name:"FileEditor",data:function(){return{file:void 0}},props:{file_id:Number},mounted:function(){void 0!==this.file_id?this.loadFile(this.file_id.toString()):this.file={name:"",file:void 0}},methods:{loadFile:function(e){var i=this,t=new o.ApiApiFactory;t.retrieveUserFile(e).then((function(e){i.file=e.data}))},modalOk:function(){void 0===this.file_id?(console.log("CREATING"),this.createFile()):(console.log("UPDATING"),this.updateFile())},updateFile:function(){var e=this,i=new o.ApiApiFactory,t=void 0;"string"===typeof this.file.file||this.file.file instanceof String||(t=this.file.file),i.updateUserFile(this.file.id,this.file.name,t).then((function(i){(0,l.makeToast)(e.$t("Success"),e.$t("success_updating_resource"),"success"),e.$emit("change")})).catch((function(i){(0,l.makeToast)(e.$t("Error"),e.$t("err_updating_resource")+"\n"+i.response.data,"danger"),console.log(i.request,i.response)}))},createFile:function(){var e=this,i=new o.ApiApiFactory;i.createUserFile(this.file.name,this.file.file).then((function(i){(0,l.makeToast)(e.$t("Success"),e.$t("success_creating_resource"),"success"),e.$emit("change"),e.file={name:"",file:void 0}})).catch((function(i){(0,l.makeToast)(e.$t("Error"),e.$t("err_creating_resource")+"\n"+i.response.data,"danger"),console.log(i.request,i.response)}))},deleteFile:function(){var e=this,i=new o.ApiApiFactory;i.destroyUserFile(this.file.id).then((function(i){(0,l.makeToast)(e.$t("Success"),e.$t("success_deleting_resource"),"success"),e.$emit("change")})).catch((function(i){(0,l.makeToast)(e.$t("Error"),e.$t("err_deleting_resource")+"\n"+i.response.data,"danger"),console.log(i.request,i.response)}))}}},a=r,c=t(1001),u=(0,c.Z)(a,n,s,!1,null,null,null),f=u.exports}}]);