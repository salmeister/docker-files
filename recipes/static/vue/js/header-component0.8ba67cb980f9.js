"use strict";(self["webpackChunkvue"]=self["webpackChunkvue"]||[]).push([[383],{58447:function(t,e,o){o.r(e),o.d(e,{default:function(){return m}});var i=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",[o("b-modal",{staticClass:"modal",attrs:{id:"id_modal_add_book_"+t.modal_id,title:t.$t("Manage_Books"),"ok-title":t.$t("Add"),"cancel-title":t.$t("Close")},on:{ok:function(e){return t.addToBook()},shown:t.loadBookEntries}},[o("ul",{staticClass:"list-group"},t._l(this.recipe_book_list,(function(e){return o("li",{key:e.id,staticClass:"list-group-item d-flex justify-content-between align-items-center"},[t._v(" "+t._s(e.book_content.name)+" "),o("span",{staticClass:"btn btn-sm btn-danger",on:{click:function(o){return t.removeFromBook(e)}}},[o("i",{staticClass:"fa fa-trash-alt"})])])})),0),o("multiselect",{staticStyle:{"margin-top":"1vh"},attrs:{options:t.books_filtered,taggable:!0,"tag-placeholder":t.$t("Create"),placeholder:t.$t("Select_Book"),label:"name","track-by":"id",id:"id_books",multiple:!1,"internal-search":!1,loading:t.books_loading},on:{tag:t.createBook,"search-change":t.loadBooks},model:{value:t.selected_book,callback:function(e){t.selected_book=e},expression:"selected_book"}})],1)],1)},a=[],s=o(47907),n=o.n(s),l=o(30381),r=o.n(l),d=o(70538),c=o(56738),k=o(70846),p=o(4222);d["default"].prototype.moment=r(),d["default"].use(c.XG7);var u={name:"AddRecipeToBook",components:{Multiselect:n()},props:{recipe:Object,modal_id:Number},data(){return{books:[],books_loading:!1,recipe_book_list:[],selected_book:null}},computed:{books_filtered:function(){let t=[];return this.books.forEach((e=>{0===this.recipe_book_list.filter((t=>t.book===e.id)).length&&t.push(e)})),t}},mounted(){},methods:{loadBooks:function(t){this.books_loading=!0;let e=new k.ApiApiFactory;e.listRecipeBooks({query:{query:t}}).then((t=>{this.books=t.data.filter((t=>-1===this.recipe_book_list.indexOf(t))),this.books_loading=!1}))},createBook:function(t){let e=new k.ApiApiFactory;e.createRecipeBook({name:t}).then((t=>{this.books.push(t.data),this.selected_book=t.data,p.StandardToasts.makeStandardToast(this,p.StandardToasts.SUCCESS_CREATE)}))},addToBook:function(){let t=new k.ApiApiFactory;t.createRecipeBookEntry({book:this.selected_book.id,recipe:this.recipe.id}).then((t=>{this.recipe_book_list.push(t.data),p.StandardToasts.makeStandardToast(this,p.StandardToasts.SUCCESS_CREATE)}))},removeFromBook:function(t){let e=new k.ApiApiFactory;e.destroyRecipeBookEntry(t.id).then((e=>{this.recipe_book_list=this.recipe_book_list.filter((e=>e.id!==t.id)),p.StandardToasts.makeStandardToast(this,p.StandardToasts.SUCCESS_DELETE)}))},loadBookEntries:function(){let t=new k.ApiApiFactory;t.listRecipeBookEntrys({query:{recipe:this.recipe.id}}).then((t=>{this.recipe_book_list=t.data,this.loadBooks("")}))}}},_=u,h=o(1001),b=(0,h.Z)(_,i,a,!1,null,null,null),m=b.exports}}]);