"use strict";(self["webpackChunkvue"]=self["webpackChunkvue"]||[]).push([[383],{58447:function(t,o,e){e.r(o),e.d(o,{default:function(){return h}});var i=function(){var t=this,o=t.$createElement,e=t._self._c||o;return e("div",[e("b-modal",{staticClass:"modal",attrs:{id:"id_modal_add_book_"+t.modal_id,title:t.$t("Manage_Books"),"ok-title":t.$t("Add"),"cancel-title":t.$t("Close")},on:{ok:function(o){return t.addToBook()},shown:t.loadBookEntries}},[e("ul",{staticClass:"list-group"},t._l(this.recipe_book_list,(function(o){return e("li",{key:o.id,staticClass:"list-group-item d-flex justify-content-between align-items-center"},[t._v(" "+t._s(o.book_content.name)+" "),e("span",{staticClass:"btn btn-sm btn-danger",on:{click:function(e){return t.removeFromBook(o)}}},[e("i",{staticClass:"fa fa-trash-alt"})])])})),0),e("multiselect",{staticStyle:{"margin-top":"1vh"},attrs:{options:t.books_filtered,taggable:!0,"tag-placeholder":t.$t("Create"),placeholder:t.$t("Select_Book"),label:"name","track-by":"id",id:"id_books",multiple:!1,"internal-search":!1,loading:t.books_loading},on:{tag:t.createBook,"search-change":t.loadBooks},model:{value:t.selected_book,callback:function(o){t.selected_book=o},expression:"selected_book"}})],1)],1)},a=[],n=(e(9653),e(41539),e(54747),e(57327),e(47907)),s=e.n(n),r=e(30381),c=e.n(r),l=e(70538),d=e(56738),u=e(70846),k=e(4222);l["default"].prototype.moment=c(),l["default"].use(d.XG7);var p={name:"AddRecipeToBook",components:{Multiselect:s()},props:{recipe:Object,modal_id:Number},data:function(){return{books:[],books_loading:!1,recipe_book_list:[],selected_book:null}},computed:{books_filtered:function(){var t=this,o=[];return this.books.forEach((function(e){0===t.recipe_book_list.filter((function(t){return t.book===e.id})).length&&o.push(e)})),o}},mounted:function(){},methods:{loadBooks:function(t){var o=this;this.books_loading=!0;var e=new u.ApiApiFactory;e.listRecipeBooks({query:{query:t}}).then((function(t){o.books=t.data.filter((function(t){return-1===o.recipe_book_list.indexOf(t)})),o.books_loading=!1}))},createBook:function(t){var o=this,e=new u.ApiApiFactory;e.createRecipeBook({name:t}).then((function(t){o.books.push(t.data),o.selected_book=t.data,k.StandardToasts.makeStandardToast(o,k.StandardToasts.SUCCESS_CREATE)}))},addToBook:function(){var t=this,o=new u.ApiApiFactory;o.createRecipeBookEntry({book:this.selected_book.id,recipe:this.recipe.id}).then((function(o){t.recipe_book_list.push(o.data),k.StandardToasts.makeStandardToast(t,k.StandardToasts.SUCCESS_CREATE)}))},removeFromBook:function(t){var o=this,e=new u.ApiApiFactory;e.destroyRecipeBookEntry(t.id).then((function(e){o.recipe_book_list=o.recipe_book_list.filter((function(o){return o.id!==t.id})),k.StandardToasts.makeStandardToast(o,k.StandardToasts.SUCCESS_DELETE)}))},loadBookEntries:function(){var t=this,o=new u.ApiApiFactory;o.listRecipeBookEntrys({query:{recipe:this.recipe.id}}).then((function(o){t.recipe_book_list=o.data,t.loadBooks("")}))}}},_=p,b=e(1001),f=(0,b.Z)(_,i,a,!1,null,null,null),h=f.exports}}]);