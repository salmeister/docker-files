"use strict";(self["webpackChunkvue"]=self["webpackChunkvue"]||[]).push([[868,56,677],{23398:function(e,t,i){i.r(t);var o=i(16387),a=i(35102),s=i(1001),n=(0,s.Z)(a.Z,o.s,o.x,!1,null,"4e48a893",null);t["default"]=n.exports},56865:function(e,t,i){i.r(t);var o=i(24280),a=i(88409),s=(i(46492),i(1001)),n=(0,s.Z)(a.Z,o.s,o.x,!1,null,"69bb1366",null);t["default"]=n.exports},98840:function(e,t,i){i.r(t);var o=i(74909),a=i(52181),s=i(1001),n=(0,s.Z)(a.Z,o.s,o.x,!1,null,"1a59c10c",null);t["default"]=n.exports},46492:function(e,t,i){i(13955)},35102:function(e,t,i){var o=i(39643);t["Z"]=o.Z},88409:function(e,t,i){var o=i(19083);t["Z"]=o.Z},52181:function(e,t,i){var o=i(76188);t["Z"]=o.Z},16387:function(e,t,i){i.d(t,{s:function(){return o},x:function(){return a}});var o=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("b-card",{directives:[{name:"hover",rawName:"v-hover"}],attrs:{"no-body":""}},[i("b-card-header",{staticClass:"p-4"},[i("h5",[e._v(" "+e._s(e.book_copy.icon)+"Â "+e._s(e.book_copy.name)+" "),i("span",{staticClass:"float-right text-primary",on:{click:e.editOrSave}},[i("i",{staticClass:"fa",class:{"fa-pen":!e.editing,"fa-save":e.editing},attrs:{"aria-hidden":"true"}})])]),e._l(e.book_copy.shared,(function(t){return i("b-badge",{key:t.id,staticClass:"font-weight-normal mr-1",attrs:{variant:"primary",pill:""}},[e._v(e._s(t.display_name))])}))],2),i("b-card-body",{staticClass:"p-4"},[e.editing?i("div",{staticClass:"form-group"},[i("label",{attrs:{for:"inputName1"}},[e._v(e._s(e.$t("Name")))]),i("input",{directives:[{name:"model",rawName:"v-model",value:e.book_copy.name,expression:"book_copy.name"}],staticClass:"form-control",attrs:{id:"inputName1",placeholder:"Name"},domProps:{value:e.book_copy.name},on:{input:function(t){t.target.composing||e.$set(e.book_copy,"name",t.target.value)}}})]):e._e(),e.editing?i("div",{staticClass:"form-group"},[i("emoji-input",{attrs:{field:"icon",label:e.$t("Icon"),value:e.book_copy.icon}})],1):e._e(),e.editing?i("div",{staticClass:"form-group"},[i("label",{attrs:{for:"inputDesc1"}},[e._v(e._s(e.$t("Description")))]),i("textarea",{directives:[{name:"model",rawName:"v-model",value:e.book_copy.description,expression:"book_copy.description"}],staticClass:"form-control",attrs:{id:"inputDesc1",rows:"3"},domProps:{value:e.book_copy.description},on:{input:function(t){t.target.composing||e.$set(e.book_copy,"description",t.target.value)}}})]):e._e(),e.editing?i("div",{staticClass:"form-group"},[i("label",{attrs:{for:"inputDesc1"}},[e._v(e._s(e.$t("Share")))]),i("generic-multiselect",{staticStyle:{"flex-grow":"1","flex-shrink":"1","flex-basis":"0"},attrs:{parent_variable:"book.shared",initial_selection:e.book.shared,label:"display_name",model:e.Models.USER_NAME,placeholder:e.$t("Share"),limit:50},on:{change:function(t){e.book_copy.shared=t.val}}})],1):e._e(),e.editing?i("div",{staticClass:"form-group"},[i("label",{attrs:{for:"inputDesc1"}},[e._v(e._s(e.$t("recipe_filter")))]),i("generic-multiselect",{staticStyle:{"flex-grow":"1","flex-shrink":"1","flex-basis":"0"},attrs:{parent_variable:"book.filter",initial_single_selection:e.book.filter,model:e.Models.CUSTOM_FILTER,multiple:!1,placeholder:e.$t("Custom Filter"),limit:50},on:{change:function(t){e.book_copy.filter=t.val}}}),i("small",{staticClass:"text-muted"},[e._v(e._s(e.$t("book_filter_help")))])],1):e._e(),e.editing?i("button",{staticClass:"btn btn-danger",on:{click:e.deleteBook}},[e._v(e._s(e.$t("Delete")))]):e._e(),e.editing?i("button",{staticClass:"btn btn-primary float-right",on:{click:e.editOrSave}},[e._v(e._s(e.$t("Save")))]):e._e(),e.editing?e._e():i("b-card-text",{staticStyle:{"text-overflow":"ellipsis"}},[e._v(" "+e._s(e.book_copy.description)+" ")])],1)],1)},a=[]},24280:function(e,t,i){i.d(t,{s:function(){return o},x:function(){return a}});var o=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{class:{bounceright:e.bounce_right,bounceleft:e.bounce_left}},[i("div",{staticClass:"row"},[i("div",{staticClass:"col col-md-12 text-center pt-2 pb-4"},[i("b-pagination",{attrs:{pills:"","total-rows":e.page_count_pagination,"per-page":e.per_page_count,"first-text":"ðŸ“–",align:"fill"},on:{change:e.pageChange},model:{value:e.current_page,callback:function(t){e.current_page=t},expression:"current_page"}})],1)]),i("div",{directives:[{name:"touch",rawName:"v-touch:swipe.left",value:e.swipeLeft,expression:"swipeLeft",arg:"swipe",modifiers:{left:!0}},{name:"touch",rawName:"v-touch:swipe.right",value:e.swipeRight,expression:"swipeRight",arg:"swipe",modifiers:{right:!0}}],staticClass:"row"},[i("div",{staticClass:"col-md-1",staticStyle:{cursor:"pointer"},on:{click:e.swipeRight}}),i("div",{staticClass:"col-md-5"},[i("transition",{attrs:{name:"flip",mode:"out-in"}},[1===e.current_page?i("cookbook-edit-card",{attrs:{book:e.book},on:{editing:function(t){e.cookbook_editing=t},refresh:function(t){return e.$emit("refresh")},reload:function(t){return e.$emit("reload")}}}):e._e()],1),i("transition",{attrs:{name:"flip",mode:"out-in"}},[e.current_page>1?i("recipe-card",{key:e.display_recipes[0].recipe,attrs:{recipe:e.display_recipes[0].recipe_content}}):e._e()],1)],1),i("div",{staticClass:"col-md-5"},[i("transition",{attrs:{name:"flip",mode:"out-in"}},[1===e.current_page?i("cookbook-toc",{attrs:{recipes:e.recipes},on:{switchRecipe:function(t){return e.switchRecipe(t)}}}):e._e()],1),i("transition",{attrs:{name:"flip",mode:"out-in"}},[e.current_page>1&&2===e.display_recipes.length?i("recipe-card",{key:e.display_recipes[1].recipe,attrs:{recipe:e.display_recipes[1].recipe_content}}):e._e()],1)],1),i("div",{staticClass:"col-md-1",staticStyle:{cursor:"pointer"},on:{click:e.swipeLeft}})])])},a=[]},74909:function(e,t,i){i.d(t,{s:function(){return o},x:function(){return a}});var o=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("b-card",{directives:[{name:"hover",rawName:"v-hover"}],attrs:{"no-body":""}},[i("b-card-header",{staticClass:"p-4"},[i("h5",[e._v(e._s(e.$t("Table_of_Contents")))])]),i("b-card-body",{staticClass:"p-4"},[i("ol",{staticClass:"mb-1",staticStyle:{"max-height":"60vh","overflow-y":"auto","-webkit-overflow-scrolling":"touch"}},e._l(e.recipes,(function(t,o){return i("li",{key:o,on:{click:function(t){return e.$emit("switchRecipe",o)}}},[i("a",{attrs:{href:"javascript:void(0)"}},[e._v(e._s(t.recipe_content.name)+" "),i("recipe-rating",{attrs:{recipe:t}})],1)])})),0),0===e.recipes.length?i("b-card-text",[e._v(" "+e._s(e.$t("Empty"))+" ")]):e._e()],1)],1)},a=[]},13955:function(){},39643:function(e,t,i){var o=i(70846),a=i(4222),s=i(81471),n=i(26678);t["Z"]={name:"CookbookEditCard",components:{EmojiInput:s["default"],GenericMultiselect:n["default"]},mixins:[a.ApiMixin],props:{book:Object},data(){return{editing:!1,book_copy:{},users:[]}},mounted(){this.book_copy=this.book,this.$root.$on("change",this.updateEmoji)},directives:{hover:{inserted:function(e){e.addEventListener("mouseenter",(()=>{e.classList.add("shadow")})),e.addEventListener("mouseleave",(()=>{e.classList.remove("shadow")}))}}},methods:{editOrSave:function(){this.editing?(this.editing=!1,this.saveData(),this.$emit("editing",!1),this.$emit("reload")):(this.editing=!0,this.$emit("editing",!0))},updateEmoji:function(e,t){"icon"===e&&(this.book_copy.icon=t)},saveData:function(){let e=new o.ApiApiFactory;e.updateRecipeBook(this.book_copy.id,this.book_copy).then((e=>{a.StandardToasts.makeStandardToast(this,a.StandardToasts.SUCCESS_UPDATE)})).catch((e=>{a.StandardToasts.makeStandardToast(this,a.StandardToasts.FAIL_UPDATE,e)}))},refreshData:function(){let e=new o.ApiApiFactory;e.listUsers().then((e=>{this.users=e.data}))},deleteBook:function(){if(confirm(this.$t("delete_confirmation",{source:this.book.name}))){let e=new o.ApiApiFactory;e.destroyRecipeBook(this.book.id).then((e=>{this.$emit("refresh"),a.StandardToasts.makeStandardToast(this,a.StandardToasts.SUCCESS_DELETE)})).catch((e=>{a.StandardToasts.makeStandardToast(this,a.StandardToasts.FAIL_DELETE,e)}))}}}}},19083:function(e,t,i){var o=i(50817),a=i(23398),s=i(98840),n=i(78627),r=i.n(n),c=i(70538),l=i(70846);c["default"].use(r()),t["Z"]={name:"CookbookSlider.vue",components:{CookbookToc:s["default"],CookbookEditCard:a["default"],RecipeCard:o["default"]},props:{recipes:Array,book:Object},computed:{page_count_pagination:function(){return this.recipes.length+2},page_count:function(){return Math.ceil(this.page_count_pagination/this.per_page_count)},display_recipes:function(){return this.recipes.slice(2*(this.current_page-1-1),2*(this.current_page-1))}},data(){return{current_page:1,per_page_count:2,bounce_left:!1,bounce_right:!1,cookbook_editing:!1}},methods:{pageChange:function(e){this.current_page=e,this.loadRecipeDetails(e)},loadRecipeDetails:function(e){this.display_recipes.forEach(((e,t)=>{if(void 0===e.recipe_content.steps){let t=new l.ApiApiFactory;t.retrieveRecipe(e.recipe).then((t=>{let i=Object.assign({},e);i.recipe_content=t.data,this.recipes.forEach(((e,t)=>{e.recipe===i.recipe&&this.$set(this.recipes,t,i)}))}))}}))},swipeLeft:function(){this.cookbook_editing||(this.current_page<this.page_count?this.pageChange(this.current_page+1):(this.bounce_left=!0,setTimeout((()=>this.bounce_left=!1),500)))},swipeRight:function(){this.cookbook_editing||(this.current_page>1?this.pageChange(this.current_page-1):(this.bounce_right=!0,setTimeout((()=>this.bounce_right=!1),500)))},switchRecipe:function(e){this.pageChange(Math.ceil((e+1)/this.per_page_count)+1)}},directives:{hover:{inserted:function(e){e.addEventListener("mouseenter",(()=>{e.classList.add("shadow")})),e.addEventListener("mouseleave",(()=>{e.classList.remove("shadow")}))}}}}},76188:function(e,t,i){var o=i(78924);t["Z"]={name:"CookbookToc",components:{RecipeRating:o["default"]},props:{recipes:Array},directives:{hover:{inserted:function(e){e.addEventListener("mouseenter",(()=>{e.classList.add("shadow")})),e.addEventListener("mouseleave",(()=>{e.classList.remove("shadow")}))}}}}}}]);